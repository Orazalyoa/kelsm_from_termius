import{_ as E}from"./_plugin-vue_export-helper-BgbHP9iJ.js";/* empty css              *//* empty css              */import{V as N,c as i,e as x,P as u,Q as p,j as a,W as t,Y as r,F as A,X as b,Z as T,B as P,u as S}from"./vue-vendor-DEVBTxx0.js";import{b as I,u as V}from"./index-tPAe9Dy4.js";import{C as L}from"./CustomNavBar-BJGtUQrX.js";import{A as U}from"./AppTabBar-Bp-nD9mT.js";import{Icon as D,Button as F,showDialog as O}from"./vant-CoNmWDyF.js";import"./index_logo-B4Lpufyb.js";const W={class:"page"},j={class:"profile-page"},M={class:"profile-info"},Q={class:"avatar-wrapper"},R=["src"],X={class:"profile-name"},Y={class:"profile-email"},Z={class:"profile-list"},$=["onClick"],q={class:"list-item-inner"},z={class:"item-title"},G={class:"logout-section"},H={__name:"Profile",setup(J){const n=N(),s=I(),{t:o}=V(),_=i(()=>s.userName||"User"),f=i(()=>s.userEmail||""),g=i(()=>s.userAvatar),h=i(()=>s.isCompanyAdmin),v=i(()=>{const e=[{title:o("profile.edit_profile"),icon:"contact",route:"EditProfile"},{title:o("profile.edit_company"),icon:"shop-o",route:"EditOrg"},{title:o("profile.select_language"),icon:"flag-o",route:"EditLanguage"},{title:o("chat.translation_settings"),icon:"guide-o",route:"TranslationSettings"},{title:o("profile.privacy_and_security"),icon:"lock",route:"Security"}];return h.value?e:e.filter(m=>m.route!=="EditOrg")}),C=()=>{n.push({name:"EditProfile"})},B=e=>{e.action==="logout"?d():e.route&&n.push({name:e.route})},k=()=>{n.push({name:"Notifications"})},d=()=>{O({title:o("profile.logout_account"),message:o("profile.logout_confirm"),confirmButtonText:o("profile.logout"),cancelButtonText:o("profile.cancel"),showCancelButton:!0,confirmButtonColor:"#ee0a24",cancelButtonColor:"#646566",className:"logout-dialog",messageAlign:"center",width:"300px"}).then(async()=>{try{await s.logout(),n.replace({name:"Welcome"})}catch(e){console.error(o("profile.logout_failed"),e)}}).catch(()=>{})};return x(()=>{s.user||s.fetchCurrentUser()}),(e,m)=>{const c=D,y=F;return p(),u("div",W,[a(L,{title:"","show-logo":!0,"show-bell":!0,onBellClick:k}),t("div",j,[t("div",M,[t("div",Q,[t("img",{src:g.value||"/images/common/default-avatar.png",class:"avatar"},null,8,R),t("div",{class:"edit-icon",onClick:C},[a(c,{name:"edit"})])]),t("div",X,r(_.value),1),t("div",Y,r(f.value),1)]),t("div",Z,[(p(!0),u(A,null,b(v.value,(l,w)=>(p(),u("div",{class:"list-item",key:w,onClick:K=>B(l)},[t("div",q,[a(c,{name:l.icon,class:"item-icon"},null,8,["name"]),t("span",z,r(l.title),1),a(c,{name:"arrow",class:"item-arrow"})])],8,$))),128))]),t("div",G,[a(y,{block:"",round:"",type:"danger",plain:"",onClick:d},{default:T(()=>[P(r(S(o)("profile.logout")),1)]),_:1})])]),a(U,{"active-tab":"profile"})])}}},lo=E(H,[["__scopeId","data-v-b464e83c"]]);export{lo as default};
