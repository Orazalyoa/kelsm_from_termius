import{_ as R}from"./_plugin-vue_export-helper-BgbHP9iJ.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{V as $,_ as M,c as h,P,Q as f,$ as T,W as z,j as e,Z as t,a1 as V,y as D,B as r,Y as g,u as i,a4 as U,r as x,a6 as J}from"./vue-vendor-DEVBTxx0.js";/* empty css              */import{l as O,u as j,b as F,m as G,E as W,F as E,H,e as Q,g as Y,I as Z}from"./index-tPAe9Dy4.js";import{NavBar as q,TabbarItem as X,Badge as ee,Tabbar as te,CellGroup as ae,Cell as oe,Button as se,showToast as c,showSuccessToast as N}from"./vant-CoNmWDyF.js";const ne={class:"main-layout"},le={key:0,class:"nav-bar-wrapper"},re={key:1,class:"tab-bar-wrapper"},ie={__name:"MainLayout",props:{title:{type:String,default:""},showNavBar:{type:Boolean,default:!0},showBack:{type:Boolean,default:!0},showTabBar:{type:Boolean,default:!1}},setup(u){const b=$(),v=M(),_=O(),{t:m}=j(),y=h(()=>{var l;const n=(l=v.name)==null?void 0:l.toLowerCase();return["home","chat","history","profile"].includes(n)?n:"home"}),k=h(()=>_.unreadCount),I=()=>{b.back()},S=n=>{const l={home:"Home",chat:"Chat",history:"History",profile:"Profile"};l[n]&&b.push({name:l[n]})};return(n,l)=>{const w=q,p=X,A=ee,L=te;return f(),P("div",ne,[u.showNavBar?(f(),P("div",le,[e(w,{title:u.title,"left-arrow":u.showBack,onClickLeft:I},{right:t(()=>[V(n.$slots,"nav-right",{},void 0,!0)]),_:3},8,["title","left-arrow"])])):T("",!0),z("div",{class:D(["main-content",{"has-navbar":u.showNavBar,"has-tabbar":u.showTabBar}])},[V(n.$slots,"default",{},void 0)],2),u.showTabBar?(f(),P("div",re,[e(L,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=C=>y.value=C),onChange:S},{default:t(()=>[e(p,{name:"home",icon:"wap-home-o"},{default:t(()=>[r(g(i(m)("tabBar.home")),1)]),_:1}),e(p,{name:"chat",icon:"chat-o"},{badge:t(()=>[k.value>0?(f(),U(A,{key:0,content:k.value,max:"99"},null,8,["content"])):T("",!0)]),default:t(()=>[r(g(i(m)("tabBar.chat"))+" ",1)]),_:1}),e(p,{name:"history",icon:"clock-o"},{default:t(()=>[r(g(i(m)("tabBar.history")),1)]),_:1}),e(p,{name:"profile",icon:"user-o"},{default:t(()=>[r(g(i(m)("tabBar.profile")),1)]),_:1})]),_:1},8,["modelValue"])])):T("",!0)])}}},ue=R(ie,[["__scopeId","data-v-ace61f5e"]]),ce={class:"test-page"},me={__name:"TestPage",setup(u){const b=$(),v=F(),{connected:_,connect:m,disconnect:y}=G(),k=x(J),I=x("production"),S=h(()=>v.isLoggedIn),n=h(()=>v.token),l=h(()=>v.userName),w=async()=>{try{c({message:"测试中...",duration:1e3});const a=await H.get(W+"/health");N("Laravel API 连接成功"),console.log("Laravel API Response:",a.data)}catch(a){c({message:"Laravel API 连接失败: "+(a.message||"未知错误"),position:"top"}),console.error("Laravel API Error:",a)}},p=async()=>{try{c({message:"测试中...",duration:1e3});const a=await H.get(E+"/health");N("Chat API 连接成功"),console.log("Chat API Response:",a.data)}catch(a){c({message:"Chat API 连接失败: "+(a.message||"未知错误"),position:"top"}),console.error("Chat API Error:",a)}},A=()=>{_.value?(y(),c({message:"WebSocket 已断开",position:"top"})):(m(),c({message:"WebSocket 连接中...",position:"top"}))},L=()=>{const a="test_key",o={text:"Hello Kelisim!",timestamp:Date.now()};Q(a,o);const s=Y(a);JSON.stringify(s)===JSON.stringify(o)?(N("LocalStorage 测试成功"),console.log("Storage Test Success:",s)):c({message:"LocalStorage 测试失败",position:"top"}),Z(a)},C=a=>{b.push({name:a})};return(a,o)=>{const s=oe,d=ae,B=se;return f(),U(ue,{title:"测试页面","show-back":!0,"show-tab-bar":!1},{default:t(()=>[z("div",ce,[e(d,{title:"基础信息"},{default:t(()=>[e(s,{title:"项目名称",value:"Kelisim Web"}),e(s,{title:"Vue 版本",value:k.value},null,8,["value"]),e(s,{title:"路由模式",value:"History"}),e(s,{title:"环境",value:I.value},null,8,["value"])]),_:1}),e(d,{title:"用户状态"},{default:t(()=>[e(s,{title:"是否登录",value:S.value?"是":"否"},null,8,["value"]),e(s,{title:"Token",value:n.value?"已设置":"未设置"},null,8,["value"]),e(s,{title:"用户名",value:l.value||"-"},null,8,["value"])]),_:1}),e(d,{title:"API 测试"},{default:t(()=>[e(s,{title:"Laravel API",value:i(W),"is-link":"",onClick:w},null,8,["value"]),e(s,{title:"Chat API",value:i(E),"is-link":"",onClick:p},null,8,["value"])]),_:1}),e(d,{title:"WebSocket 测试"},{default:t(()=>[e(s,{title:"连接状态",value:i(_)?"已连接":"未连接"},null,8,["value"]),e(B,{type:"primary",size:"small",onClick:A,style:{margin:"10px"}},{default:t(()=>[r(g(i(_)?"断开连接":"连接 WebSocket"),1)]),_:1})]),_:1}),e(d,{title:"存储测试"},{default:t(()=>[e(B,{type:"primary",size:"small",onClick:L,style:{margin:"10px"}},{default:t(()=>[...o[2]||(o[2]=[r(" 测试 LocalStorage ",-1)])]),_:1})]),_:1}),e(d,{title:"导航测试"},{default:t(()=>[e(B,{type:"primary",size:"small",block:"",onClick:o[0]||(o[0]=K=>C("Welcome")),style:{margin:"10px"}},{default:t(()=>[...o[3]||(o[3]=[r(" 跳转到欢迎页 ",-1)])]),_:1}),e(B,{type:"primary",size:"small",block:"",onClick:o[1]||(o[1]=K=>C("Home")),style:{margin:"10px"}},{default:t(()=>[...o[4]||(o[4]=[r(" 跳转到首页 ",-1)])]),_:1})]),_:1})])]),_:1})}}},ke=R(me,[["__scopeId","data-v-a5b1c94c"]]);export{ke as default};
