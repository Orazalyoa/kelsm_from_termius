import{_ as E}from"./_plugin-vue_export-helper-BgbHP9iJ.js";/* empty css              *//* empty css              *//* empty css              */import{V as K,_ as L,r as n,c as p,e as O,o as U,P as k,Q as C,j as d,W as t,Y as v,$ as j,y as z,u as f,Z as D,B as F}from"./vue-vendor-DEVBTxx0.js";import{u as H}from"./index-tPAe9Dy4.js";import{NavBar as M,PasswordInput as Q,Button as S,NumberKeyboard as W,showToast as V}from"./vant-CoNmWDyF.js";const Y={class:"otp-verification-container"},Z={class:"main-content"},A={class:"info-container"},G={class:"info-text"},J={class:"otp-container"},X={key:0,class:"error-message"},ee={class:"error-text"},te={class:"resend-container"},oe={class:"button-container"},ne={__name:"OtpVerification",setup(ae){const m=K(),h=L(),{t:e}=H(),y=n(h.query.type||"phone"),g=n(h.query.contact||""),r=n(""),u=n(""),l=n(!1),s=n(!1),o=n(60);let i=null;const x=p(()=>y.value==="phone"?e("auth.otp_title_phone"):e("auth.otp_title_email")),B=p(()=>`${y.value==="phone"?e("auth.otp_sent_phone"):e("auth.otp_sent_email")} ${g.value}`),b=p(()=>r.value.length===4);function I(){m.back()}function w(){o.value=60,i=setInterval(()=>{o.value--,o.value<=0&&clearInterval(i)},1e3)}function T(){o.value>0||(V(e("auth.code_resent")),w())}async function $(){if(!(!b.value||l.value)){l.value=!0,u.value="";try{await new Promise(c=>setTimeout(c,1e3)),V(e("auth.verification_success")),m.push({name:"Home"})}catch{u.value=e("auth.verification_error")}finally{l.value=!1}}}return O(()=>{w(),setTimeout(()=>{s.value=!0},300)}),U(()=>{i&&clearInterval(i)}),(c,a)=>{const N=M,P=Q,R=S,q=W;return C(),k("div",Y,[d(N,{title:x.value,"left-arrow":"",onClickLeft:I},null,8,["title"]),t("div",Z,[t("div",A,[t("p",G,v(B.value),1)]),t("div",J,[d(P,{value:r.value,length:4,gutter:10,focused:s.value,onFocus:a[0]||(a[0]=_=>s.value=!0)},null,8,["value","focused"]),u.value?(C(),k("div",X,[t("span",ee,v(u.value),1)])):j("",!0)]),t("div",te,[t("span",{class:z(["resend-link",{disabled:o.value>0}]),onClick:T},v(o.value>0?`${o.value}s ${f(e)("auth.resend_code")}`:f(e)("auth.resend_code")),3)]),t("div",oe,[d(R,{type:"primary",block:"",round:"",disabled:!b.value,loading:l.value,onClick:$},{default:D(()=>[F(v(f(e)("auth.confirm")),1)]),_:1},8,["disabled","loading"])])]),d(q,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=_=>r.value=_),show:s.value,maxlength:4,onBlur:a[2]||(a[2]=_=>s.value=!1)},null,8,["modelValue","show"])])}}},ve=E(ne,[["__scopeId","data-v-030dd4a4"]]);export{ve as default};
