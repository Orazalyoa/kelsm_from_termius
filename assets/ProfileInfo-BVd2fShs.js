import{_ as P}from"./_plugin-vue_export-helper-BgbHP9iJ.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{V as q,r as _,c as y,P as $,Q as D,W as t,j as u,Y as r,u as s,Z as f,s as d,a2 as m,y as E,B as N}from"./vue-vendor-DEVBTxx0.js";import{u as j,b as G,j as x,g as v}from"./index-tPAe9Dy4.js";import{h as z}from"./errorHandler-D1LKPKx3.js";import{Icon as A,Button as F,Form as H,Picker as M,Popup as O,showSuccessToast as Q}from"./vant-CoNmWDyF.js";const R={class:"profile-info-container"},W={class:"header"},Y={class:"title"},Z={class:"main-content"},J={class:"form-item"},K={class:"form-label"},L=["placeholder"],X={class:"form-item"},ee={class:"form-label"},oe=["placeholder"],te={class:"form-item"},ae={class:"form-label"},se={class:"form-item"},le={class:"form-label"},ne=["placeholder"],re={class:"form-item"},ie={class:"form-label"},ue=["placeholder"],de={class:"form-item"},me={class:"form-label"},ce=["placeholder"],pe={class:"form-item"},_e={class:"form-label"},fe=["placeholder"],ve={class:"button-container"},he={__name:"ProfileInfo",setup(be){const h=q(),{t:a}=j(),k=G(),e=_({first_name:"",last_name:"",gender:"male",phone:"",country_code:"+7",email:"",password:"",password_confirmation:""}),c=_(!1),p=_(!1),b=[{text:a("auth.male"),value:"male"},{text:a("auth.female"),value:"female"}],w=y(()=>{const n=b.find(o=>o.value===e.value.gender);return n?n.text:""}),g=y({get(){return e.value.phone?`${e.value.country_code} ${e.value.phone}`:e.value.country_code||"+7"},set(n){const o=n.match(/^(\+\d+)\s*(.*)$/);o?(e.value.country_code=o[1],e.value.phone=o[2]):e.value.phone=n}});function V(){h.back()}function I({selectedOptions:n}){e.value.gender=n[0].value,p.value=!1}async function S(){c.value=!0;try{if(!e.value.email&&!e.value.phone){x(a("validation.email_or_phone_required")),c.value=!1;return}if(e.value.password!==e.value.password_confirmation){x(a("validation.password_mismatch")),c.value=!1;return}const n=v("temp_user_type"),o={user_type:n,first_name:e.value.first_name,last_name:e.value.last_name,gender:e.value.gender,password:e.value.password,password_confirmation:e.value.password_confirmation};if(e.value.email&&(o.email=e.value.email),e.value.phone&&(o.phone=e.value.phone,o.country_code=e.value.country_code),n==="expert"){o.invite_code=v("temp_invite_code");const i=v("temp_professions");i&&i.length>0&&(o.profession_ids=i)}await k.register(o),Q(a("auth.register_success")),localStorage.removeItem("temp_user_type"),localStorage.removeItem("temp_invite_code"),localStorage.removeItem("temp_professions"),setTimeout(()=>{h.replace({name:"Home"})},1500)}catch(n){z(n,a("auth.register_failed"))}finally{c.value=!1}}return(n,o)=>{const i=A,U=F,C=H,T=M,B=O;return D(),$("div",R,[t("div",W,[t("h1",Y,r(s(a)("auth.profile_title")),1),u(i,{name:"cross",class:"close-btn",onClick:V})]),t("div",Z,[u(C,{onSubmit:S},{default:f(()=>[t("div",J,[t("label",K,r(s(a)("auth.last_name")),1),d(t("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>e.value.last_name=l),class:"form-input",placeholder:s(a)("auth.last_name"),required:""},null,8,L),[[m,e.value.last_name]])]),t("div",X,[t("label",ee,r(s(a)("auth.first_name")),1),d(t("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.first_name=l),class:"form-input",placeholder:s(a)("auth.first_name"),required:""},null,8,oe),[[m,e.value.first_name]])]),t("div",te,[t("label",ae,r(s(a)("auth.gender")),1),t("div",{class:"form-input select-input",onClick:o[2]||(o[2]=l=>p.value=!0)},[t("span",{class:E({placeholder:!w.value})},r(w.value||s(a)("auth.select_gender")),3),u(i,{name:"arrow-down"})])]),t("div",se,[t("label",le,r(s(a)("auth.phone_number")),1),d(t("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>g.value=l),class:"form-input",type:"tel",placeholder:s(a)("auth.phone_number")},null,8,ne),[[m,g.value]])]),t("div",re,[t("label",ie,r(s(a)("auth.email")),1),d(t("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>e.value.email=l),class:"form-input",type:"email",placeholder:s(a)("auth.email")},null,8,ue),[[m,e.value.email]])]),t("div",de,[t("label",me,r(s(a)("auth.password")),1),d(t("input",{"onUpdate:modelValue":o[5]||(o[5]=l=>e.value.password=l),class:"form-input",type:"password",placeholder:s(a)("auth.password"),required:""},null,8,ce),[[m,e.value.password]])]),t("div",pe,[t("label",_e,r(s(a)("auth.password_confirmation")),1),d(t("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>e.value.password_confirmation=l),class:"form-input",type:"password",placeholder:s(a)("auth.password_confirmation"),required:""},null,8,fe),[[m,e.value.password_confirmation]])]),t("div",ve,[u(U,{type:"primary",class:"submit-btn",block:"",round:"","native-type":"submit",loading:c.value},{default:f(()=>[N(r(s(a)("auth.save_continue")),1)]),_:1},8,["loading"])])]),_:1})]),u(B,{show:p.value,"onUpdate:show":o[8]||(o[8]=l=>p.value=l),position:"bottom",round:""},{default:f(()=>[u(T,{columns:b,onConfirm:I,onCancel:o[7]||(o[7]=l=>p.value=!1)})]),_:1},8,["show"])])}}},Te=P(he,[["__scopeId","data-v-12d04b2d"]]);export{Te as default};
