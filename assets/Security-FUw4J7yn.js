import{_ as b}from"./_plugin-vue_export-helper-BgbHP9iJ.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{V as x,r as m,P as C,Q as V,j as s,u as t,Z as l}from"./vue-vendor-DEVBTxx0.js";import{u as y,b as B}from"./index-tPAe9Dy4.js";import{h as k}from"./errorHandler-D1LKPKx3.js";import{C as P}from"./CustomNavBar-BJGtUQrX.js";import{Cell as S,CellGroup as U,Form as T,Field as D,Dialog as F,showDialog as A,showToast as u,showSuccessToast as E}from"./vant-CoNmWDyF.js";import"./index_logo-B4Lpufyb.js";const I={class:"security-page"},N={__name:"Security",setup(j){x();const{t:o}=y(),_=B(),n=m(!1),e=m({current_password:"",new_password:"",confirm_password:""}),w=()=>{n.value=!0},f=async()=>{if(!e.value.current_password||!e.value.new_password){u(o("validation.password_required"));return}if(e.value.new_password!==e.value.confirm_password){u(o("validation.password_mismatch"));return}try{await _.changePassword({current_password:e.value.current_password,password:e.value.new_password,password_confirmation:e.value.confirm_password}),E(o("profile.save_success")),e.value={current_password:"",new_password:"",confirm_password:""}}catch(p){k(p,o("profile.password_change_failed"))}},h=()=>{A({title:o("profile.logout_account"),message:o("profile.logout_desc"),confirmButtonText:o("profile.confirm"),confirmButtonColor:"#ff3b30",showCancelButton:!0,cancelButtonText:o("common.cancel")}).then(()=>{u(o("common.coming_soon"))}).catch(()=>{})};return(p,a)=>{const i=S,d=U,c=D,v=T,g=F;return V(),C("div",I,[s(P,{title:t(o)("profile.security"),"show-logo":!1},null,8,["title"]),s(d,{title:t(o)("profile.password_settings")},{default:l(()=>[s(i,{title:t(o)("profile.change_password"),"is-link":"",onClick:w},null,8,["title"])]),_:1},8,["title"]),s(d,null,{default:l(()=>[s(i,{title:t(o)("profile.logout_account"),"is-link":"",onClick:h,"title-class":"danger-text"},null,8,["title"])]),_:1}),s(g,{show:n.value,"onUpdate:show":a[3]||(a[3]=r=>n.value=r),title:t(o)("profile.change_password"),"show-cancel-button":"","confirm-button-text":t(o)("common.confirm"),"cancel-button-text":t(o)("common.cancel"),onConfirm:f},{default:l(()=>[s(v,{style:{padding:"16px"}},{default:l(()=>[s(c,{modelValue:e.value.current_password,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.current_password=r),type:"password",label:t(o)("auth.current_password"),placeholder:t(o)("auth.current_password")},null,8,["modelValue","label","placeholder"]),s(c,{modelValue:e.value.new_password,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.new_password=r),type:"password",label:t(o)("auth.new_password"),placeholder:t(o)("auth.new_password")},null,8,["modelValue","label","placeholder"]),s(c,{modelValue:e.value.confirm_password,"onUpdate:modelValue":a[2]||(a[2]=r=>e.value.confirm_password=r),type:"password",label:t(o)("auth.confirm_password"),placeholder:t(o)("auth.confirm_password")},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1},8,["show","title","confirm-button-text","cancel-button-text"])])}}},Y=b(N,[["__scopeId","data-v-cdf6c5aa"]]);export{Y as default};
